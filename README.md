# 搭建 Linux + Win10 多系统
```
/*
 *本文版权归本人本科阶段老师所有，请勿随意转载，此处仅为笔记方便以后查看
 */
```
本文主要阐述了搭建 Linux/Win7+Win10 等多系统的 3 种相关方案，前面两种方案介绍了"legacy 启动
+mbr 分区表"安装多系统的方式，第三种方案则介绍了"UEFI 启动+gpt 分区表"安装多系统的方式。

```
如果电脑支持 legacy 模式启动安装 win10，建议使用前两种方案安装多系统；
如果电脑只能以 UEFI 方式启动 win10，建议使用第三种方案安装多系统；
```
建议：
```
1. 如果是固态硬盘+机械硬盘的电脑，固态硬盘的容量最好 250G 以上；容量只有 120G 的固态硬盘建
议关闭 Win10 的休眠功能。
2. 不建议使用只有固态硬盘的电脑，硬盘空间太小，无法安装多系统，存储数据。
重要说明：
1. 如果使用的是正版 win10，请先通过网络激活 win10，微软认证中心会记录该电脑的硬件信息，以
后该电脑重装 win10 也可以直接激活，这样就不用保留原有的 win10 系统。
2. 硬盘使用前要分区，分区需要用软件在硬盘上建立分区表的数据结构。
 目前主流的分区表格式有 mbr 和 gpt 两种，后者的技术上更新(但不意味着最好，或者最适合你)，主
要是支持超过 2T 的大硬盘，支持超过 4 个以上的主分区(可以任意多个，但实际上用不了这么多)。
尽管 gpt 分区表有支持 2T 以上硬盘的优势，但是目前安装系统的硬盘基本上都达不到，或者根本也
用不到这么大硬盘，因此采用 gpt 分区表不是必须的方案。
在实际测试中，有实验表明，采用 mbr 分区表或 gpt 分区表并没有区别，甚至有的还发现使用 mbr 分
区表系统会更快一些，因此建议对安装 win10 或者 Linux 的系统硬盘采用 mbr 分区表。
3. 要安装除了 win10 之外的系统(包括 win7、Linux)，必须进入 BIOS 配置完成以下配置：
 1）SecureBoot 改成 Disabled，禁用安全启动(部分机型需设置 BIOS 密码才可以修改 Secure Boot，找
到 Set Supervisor Password 设置密码)
 2）CSM 改成 Enable 或 Yes 或 ALWAYS，表示启用兼容支持模块
 3）OS Mode Selection 设置为 CSM OS，表示启用兼容支持模块的操作系统支持，也就是允许安装
win7/Linux(部分机型没有这个选项，就不管它)
 4）Boot mode 或 UEFI mode 或 Boot List Option 改成 legacy 或者 Both，表示传统启动方式
 5）OS Optimized Defaults 改成 Disabled 或 Other OS，禁用默认系统优先设置(部分机型没有就不管)
 6）Advanced 选项下 Fast BIOS Mode 设置为 Disabled(部分机型没有就不管)
 不同系统上述细节有所不同，请参见：http://mini.eastday.com/mobile/171220203748349.html
 ```
方案一、"legacy 启动+mbr 分区表"安装多系统：固态+机械硬盘的电脑
```
1.硬盘分区：以传统 legacy 方式启动 Linux 启动优盘，使用分区工具(KDE 分区管理器或者 GParted)对
硬盘进行操作
1）在固态硬盘上创建 mbr 分区表，机械硬盘创建 gpt 分区表。固态硬盘用于安装系统、机械硬盘用
于存储数据。
2）分区
固态硬盘(sdb)至少分为 3 个区，sdb1(50G)留给 win10，sdb2(50G)留给 Linux，sdb5（主存容量的 1.5
～2 倍为佳）作为 Linux 交换分区；如果固态硬盘容量比较大，建议 sdb1(60G～80G),sdb2(60G～80G)，剩
下的分区还可以分个系统分区(60G～80G)左右。
(备注：这是使用 ghost 恢复 win10 的方案，如果需要全新安装 win10,则需要分 4 个区，sdb1(只需要几
百 M)、sdb2 留给 win10,sdb3 留给 Linux，sdb5 作为 Linux 交换分区)
机械硬盘作为数据盘，按照自己的需要分区，建议给 Linux 留一半的机械硬盘空间，并且分为 3～5
个分区(用于安装其他 Linux 系统、备份软件、备份重要学习资料(防止病毒和木马)、备份一些私人资料
(照片)等等)
2.恢复系统：以传统 legacy 方式启动
1）启动 windows 启动优盘，选择 windows pe 启动，使用 WinNTSetup 程序安装(或者使用 ghost 程序恢
复)win10 到 sdb1 上（备注：如果使用默认的安装方式，安装 win10 至少需要两个分区 sdb1、sdb2。）
2）启动 Linux 启动优盘，将 Linux 系统恢复到 sdb2 上(备注：如果是全新按照 win10,sdb2 被占用，则
恢复 Linux 到 sdb3 上)
```
方案二、"legacy 启动+mbr 分区表"安装多系统：只有机械硬盘的电脑
```
1.硬盘分区：以传统 legacy 方式启动 Linux 启动优盘，使用分区工具(KDE 分区管理器或者 GParted)对
硬盘进行操作
1) 在机械硬盘上创建 mbr 分区表
2) 对机械硬盘分区
机械硬盘至少分 3 个区，sda1(60G～80G)留给 win10，sda2(60G～80G)留给 Linux，sda5（主存容量的
1.5～2 倍为佳）作为 Linux 交换分区；其余空间按需要分区，建议给 Linux 留一半的剩余硬盘空间，并且
分为 3～5 个分区(用于安装其他 Linux 系统、备份软件、备份重要学习资料(防止病毒和木马)、备份一些
私人资料(照片)等等)
2.恢复系统：以传统 legacy 方式启动
1）启动 windows 启动优盘，选择 windows pe 启动，使用 WinNTSetup 程序安装(或者使用 ghost 程序恢
复)win10 到 sdb1 上（备注：如果使用默认的安装方式，安装 win10 至少需要两个分区 sdb1、sdb2。）
2）启动 Linux 启动优盘 ，将 Linux 系统恢复到 sda2 上(备注：如果是全新安装 win10,sda2 被占用，则
恢复 Linux 到 sda3 上)
```
方案三、"UEFI 启动+gpt 分区表"安装多系统：系统安装到 gpt 分区表硬盘的电脑
```
1. 采用 UEFI 方式启动 windows 安装盘，默认全新安装 win10，在系统硬盘上安装 win10 时设置系统
分区大小(建议 70G～90G 之间)，由 windows 安装程序自己自动创建它所需的 windows 分区(通常会创建 4
个 windows 分区)。
2. 使用 UEFI 方式启动 Linux 启动优盘，使用分区工具对硬盘剩下的空间进行分区（如果安装 win10
用了整个硬盘空间，则需要从减小 Windows 分区，留下一部分用于安装 Linux）。
以机械硬盘为例，然后使用分区工具在剩余空间中划分 Linux 系统所需的分区 ( 例如分一个 sda6 分
区，大小为(60G～90G) 给 Linux 根分区，一个 sda5 分区（大小为主存容量的 1.5～2 倍为佳，如主存为
8G，就划分为 16G）作为 Linux 交换分区）；其余空间按需要分区，建议给 Linux 留一半的剩余硬盘空间，
并且分为 3～5 个分区(用于安装其他 Linux 系统、备份软件、备份重要学习资料(防止病毒和木马)、备份
一些私人资料(照片)等等)
3.启动 Linux 启动优盘 ，将 Manjaro Linux 系统镜像恢复安装到 sda6 上。 (也可以自己全新安装 Linux
到分好 Linux 根分区(如 sda6)，在安装时，需要将/boot 分区指定到 windows 的 efi 分区上，按提示完成其余
的安装部分。)
4.安装 Linux 完毕后，重启，在 UEFI 的菜单上就可以看到 Linux 的启动选项。
```
 关于方案三的备注：
 ```
 许多笔记本默认按照步骤一安装好了 win10 系统，则只需进行步骤二以后的内容。
 全新安装的 Linux 只有默认的软件，没有以恢复安装方式安装后的 Linux 中的大部分开发软件，这
些软件只有自己安装配置。
 这种方式安装的多系统在引导方面在后期可能需要更多的维护工作。因此，初学者不建议使用这
种方式安装多系统。
```

附录：
```
一、进入 UEFI BIOS 的按键
1.启动时按 f2：华硕 Asus、联想 Lenovo、戴尔 dell、三星 samsung、hp、sony、acer、fujitsu、大多数
中国大陆国产和台湾品牌
2.启动时按 Delete：微星 msi
3.启动时按 f1：ibm/thinkpad(少数机型是 Fn+F1 或 F2)
4.冷开机时按 esc 然后按 f1，或者 F2：东芝 toshiba
5.按 f10，或者开机时按 f10：hp compaq
二、热启动按键(用于选择优盘启动)：
大多数 F12；华硕 ESC；三星 F12/F10/F9/ESC；惠普 F9/先 Esc 再 F9
```
